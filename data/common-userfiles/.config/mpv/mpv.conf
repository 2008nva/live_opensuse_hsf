##################
# video settings #
##################

profile=HSF

[HSF-fallback]
profile=default
opengl-backend=x11
opengl-pbo=no
opengl-fbo-format=rgba16f
video-sync=audio
scaler-lut-size=6
scaler-resizes-only=yes
# bilinear is safer
scale=lanczos
dscale=mitchell
correct-downscaling=no
sigmoid-upscaling=no
deband=no
interpolation=no
#vo=xv,opengl,

[HSF]
# Specify default video driver (see -vo help for a list).
profile=opengl-hq
opengl-pbo=yes
alpha=blend
# blending may cause issues with user shaders
blend-subtitles=yes
# mpv's colour correction may interfere with compositor
#target-prim=bt.709
#target-trc=srgb
icc-profile-auto=no
# contrast for VA-matrix displays
icc-contrast=3000
scale=ewa_lanczossharp
dscale=mitchell
# disable automatic dithering
#dither-depth=no
# disable randomized dithering that may cause artifacts on slow LCDs
temporal-dither=no
deband=yes
#deband-iterations=2
#deband-range=64
#scale-antiring=0.25
# maximum size gives great results but slows down seeking
scaler-lut-size=10
interpolation=yes
#interpolation-threshold=-1
#tscale=oversample
#tscale=catmull_rom
tscale=sinc
#tscale-radius=2
#tscale-clamp=yes
#user-shaders="~/.config/mpv/shaders/SSimSuperRes.glsl"
vo=opengl,wayland,xv,drm,caca,null,
# Needed for interpolation
# display-resample-vdrop may cause sync and issues
video-sync=display-resample-vdrop

# Use luma, needed for vapoursynth-mvtools
#vf-add=format=yuv420p

# enable high-quality superhigh-demand 60fps interpolation for ≤720p media
#vf-add=vapoursynth=~/.config/mpv/vapoursynth_motioninterpolation_720p.vpy
# enable high-quality superhigh-demand image doubling for ≤480p media
#vf-add=vapoursynth=~/.config/mpv/vapoursynth_nnedi3.vpy

# better precise seeking with frame interpolation
hr-seek-framedrop=no

# Start in fullscreen mode by default.
fs=no

# Always set window size to a nice auto-calculated value at startup
autofit=70%x60%

# counteract dumb mplayer-centric settings
#keepaspect=yes
#monitoraspect=0
#video-aspect=-1
#video-unscaled=no

##################
# audio settings #
##################

# Specify default audio driver (see -ao help for a list).
#jack-std-channel-layout=waveext
jack-port=Calf Studio Gear
jack-connect=no
ao=jack,pulse,alsa,null,

# better sync
initial-audio-sync=yes

# tweaks
#ad-lavc-ac3drc=0.75
# stereo / 7.1(alsa), [auto-safe] / auto
#audio-channels=stereo
audio-normalize-downmix=yes
# next 3 options may be best left for mpv to figure out
audio-format=floatp
audio-samplerate=48000
gapless-audio=yes
audio-file-auto=fuzzy

# Output audio to S/PDIF
#ao=alsa:device=spdif
#ac=hwac3,hwdts,hwmpa,

# default volume
volume=100
volume-max=300
#af-add=acompressor

##################
# other settings #
##################

# Drop frames to preserve audio/video sync.
#framedrop = no

# cache settings
#
# Use 8MB input cache by default.
#cache = auto

# get a default OSD font from fontconfig
# "DejaVu Sans" is a good choice for all
#sub-bold=yes
sub-font="Noto Sans"
sub-font-size=46
#sub-border-size=0
sub-border-color="#E6050505"
sub-color="#F0A6A650"
osd-font="Joystix"
# monospace font is needed to correctly show custom OSD but mpv-stats lua script is preferable
#osd-font="Hack"
osd-font-size=35
osd-spacing=1
osd-color="#D7AAFF7F"
#osd-border-size=0
osd-border-color="#EB000000"

# show custom important info
#osd-duration=5000
#osd-msg3="[custom statistics]\n current vo:                          ${current-vo}\n current ao:                          ${current-ao}\n frames dropped by decoder:           ${drop-frame-count}\n frames dropped by vo:                ${vo-drop-frame-count}\n frames delayed by vo:                ${vo-delayed-frame-count}\n mistimed frames:                     ${mistimed-frame-count}\n \n estimated display FPS:               ${estimated-display-fps}\n vsync ratio:                         ${vsync-ratio}\n vsync jitter:                        ${vsync-jitter}\n last  A/V sync difference:         ${avsync}\n total A/V sync correction:           ${total-avsync-change}\n audio speed correction:              ${audio-speed-correction}\n video speed correction:              ${video-speed-correction}"

# Force sub kerning
sub-ass-force-style=Kerning=yes

# Force ass margins
sub-ass-force-margins

# Make use of smart codepage guessing
sub-codepage=uchardet

# more space for subtitles at black borders
sub-margin-y=2

# positioning of multi-line subtitles
sub-justify=left
sub-ass-justify=yes

# disable joystick by default as it interferes with notebook motion sensors
#nojoystick=yes

# disable the running screen saver
#stop-screensaver
#heartbeat-cmd="xscreensaver-command -deactivate >&- 2>&- &"

# Higher quality screenshots, PNG is unfortunately too large
screenshot-format=jpg
screenshot-jpeg-quality=95
screenshot-tag-colorspace=yes
# ~/ScreenShots/SnapShots
screenshot-directory=~/ScreenShots/SnapShots

# LUA scripting
script=~/.config/mpv/scripts/stats.lua

# Replacement for quvi. Always use 1080p+ or 60 fps where available. Prefer VP9
# over AVC and VP8 for high-resolution streams.
ytdl=yes
ytdl-format=(bestvideo[ext=webm]/bestvideo[height>720]/bestvideo[fps=60])[tbr<13000]+(bestaudio[acodec=opus]/bestaudio[ext=webm]/bestaudio)/best
