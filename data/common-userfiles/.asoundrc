### ALSA => JACK routing (screw you, PA !)
pcm.jack {
    type jack
    hint {
        show on
        description "JACK"
    }
    playback_ports {
        0 jamin:in_L
        1 jamin:in_R
#        2 system:playback_3
#        3 system:playback_4
#        4 system:playback_5
#        5 system:playback_6
#        6 system:playback_7
#        7 system:playback_8
    }
    capture_ports {
        0 system:capture_1
        1 system:capture_2
    }
}

pcm.!default {
  type plug
  slave.pcm jack
  hint {
    show on
    description "Default ALSA Output (currently JACK)" }
}
ctl.!default {
  type hw
  card 0
}

## crutch for stupid apps like Firefox
pcm.!sysdefault {
  type plug
  slave.pcm jack
  hint {
    show on
    description "Crutch for stupid applications (JACK enforcement)" }
}

## snd-aloop crutch for super-stupid applications like wine
# playback device
pcm.aloopPlayback {
  type dmix
  ipc_key 1
  ipc_key_add_uid true
  slave {
    pcm "hw:Loopback,0,0"
    format S32_LE
    rate {
      @func igetenv
      vars [ JACK_SAMPLE_RATE ]
      default 48900
    }
    period_size {
      @func igetenv
      vars [ JACK_PERIOD_SIZE ]
      default 1024
    }
    buffer_size 4096
  }
}

# capture device
pcm.aloopCapture {
  type dsnoop
  ipc_key 2
  ipc_key_add_uid true
  slave {
    pcm "hw:Loopback,0,1"
    format S32_LE
    rate {
      @func igetenv
      vars [ JACK_SAMPLE_RATE ]
      default 48000
    }
    period_size {
      @func igetenv
      vars [ JACK_PERIOD_SIZE ]
      default 1024
    }
    buffer_size 4096
  }
}

# duplex device
pcm.aloopDuplex {
  type asym
  playback.pcm "aloopPlayback"
  capture.pcm "aloopCapture"
}

# default device
pcm.jack-aloop {
  type plug
  slave.pcm "aloopDuplex"
  hint {
    show on
    description "Crutch for super-stupid applications (ass-backwards JACK enforcement)" }
}

## additional pulse crutch for completely retarded applications like aegisub
## that can't handle neither ALSA or Pulse directly and can't even dream of JACK.
## also, some apps with hyper-lazy authors may rely on ALSA/PA emulation because
## they didn't code PA support but realised that ALSA is inaccessible now
pcm.pulse {
    type pulse
    hint {
        show on
        description "Crutch for full retard applications (PulseAudio redirection layer)"
    }
    fallback "sysdefault"
}

ctl.pulse {
    type pulse
    fallback "sysdefault"
}
